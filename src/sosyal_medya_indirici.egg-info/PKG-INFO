Metadata-Version: 2.4
Name: sosyal-medya-indirici
Version: 0.1.0
Summary: Çoklu platform desteğine hazır Telegram içerik indirme botu
Author: Cursor Bot
License: MIT
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: aiogram<4,>=3.13
Requires-Dist: aiohttp>=3.10
Requires-Dist: httpx[http2]>=0.27
Requires-Dist: pydantic-settings>=2.3
Requires-Dist: python-dotenv>=1.0
Provides-Extra: dev
Requires-Dist: ruff>=0.7; extra == "dev"
Requires-Dist: mypy>=1.11; extra == "dev"

# Sosyal Medya İndirici Botu

Telegram üzerinden TikTok (ve gelecekte diğer platformlar) içeriklerini indirebilen, gruplarda ve özel sohbetlerde kullanılmaya hazır, genişletilebilir bir bot.

## Özellikler
- Sohbete bırakılan her TikTok linkini otomatik olarak algılama
- Videoları, story'leri ve fotoğraf albümlerini tek istekle ayırt edip gönderme
- Albümlerde Telegram sınırlarını aşmamak için 10'lu medya grupları ve artan görselleri tekil mesajlarla tamamlama
- Hem özel sohbetlerde hem de gruplarda güvenli kullanım
- TikTok dışındaki platformlar için modüler servis mimarisi

## Gereksinimler
- Python 3.11+
- Telegram bot token ([@BotFather](https://t.me/BotFather) üzerinden alınır)

## Kurulum
```bash
# bağımlılıkları kur
pip install -e .

# ortam değişkenlerini hazırla
cp .env.example .env
# .env dosyasındaki BOT_TOKEN, BOT_MODE vb. alanları doldurun

# botu çalıştır
python -m bot.main
```

> Varsayılan olarak TikTok medyaları `https://tikwm.com/api/` servisi üzerinden çekilir. Farklı bir servis kullanmak isterseniz `.env` içindeki `TIKWM_API_URL` değerini güncelleyin.

### Çalıştırma Modları
- `BOT_MODE=polling`: Lokal geliştirme için idealdir, Telegram API’sine long-polling ile bağlanır.
- `BOT_MODE=webhook`: Railway gibi kalıcı olarak yayımlanan servislerde önerilir. `WEBHOOK_BASE_URL` ve isteğe bağlı `WEBHOOK_SECRET` değerlerini tanımlayın.

## Komutlar
- `/start` – Botu başlatır, kısa bilgilendirme yapar.
- `/help` – Nasıl kullanacağınızı ve ipuçlarını gösterir.

## Mimari
```
src/bot
├── config.py        # .env tabanlı ayarlar
├── logging.py       # standart logging konfigurasyonu
├── main.py          # aiogram Dispatcher ve router kurulumu
├── handlers/
│   ├── base.py      # /start, /help vb.
│   └── tiktok.py    # TikTok komutları ve iş mantığı
├── services/
│   └── tiktok.py    # tikwm tabanlı indirme servisi
└── utils/
    └── chunk.py     # medya gruplarını bölme yardımcıları
```

Yeni bir platform eklemek için `services/` altında yeni bir istemci ve `handlers/` altında ilgili komutları tanımlamanız yeterli. Router mimarisi her servisi modüler tutar.

## Railway Üzerine Dağıtım
1. Railway hesabınızda yeni bir “Service” oluşturun ve bu repo’yu bağlayın (veya `railway up` komutuyla push edin). Proje, kökteki Dockerfile ile otomatik container olarak derlenir.
2. Ortam değişkenlerini ayarlayın:
   - `BOT_TOKEN`: BotFather’dan aldığınız token.
   - `BOT_MODE=webhook`
   - `WEBHOOK_BASE_URL=https://<projeniz>.up.railway.app`
   - `WEBHOOK_PATH=/webhook/<rastgele>` (Telegram token’ınızı ifşa etmeyen bir yol seçin)
   - `WEBHOOK_SECRET` (opsiyonel fakat güvenlik için önerilir)
3. Railway `PORT` değişkenini otomatik sağlar; bot sunucusu `0.0.0.0:PORT` üzerinde webhook dinleyicisini ayağa kaldırır.
4. Deploy tamamlandığında Telegram tarafında webhook kendiliğinden ayarlanır; botunuz hazır olur.

## Yol Haritası
- Instagram Reels/Stories indirme
- YouTube kısa & uzun video desteği
- Reddit ve X (Twitter) içerikleri
- Kuyruk sistemi (Redis) ile yüksek hacimli istek yönetimi
